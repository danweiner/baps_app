/*!CK:2184725336!*//*1458696663,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["cDpF\/"]); }

__d('PrivacyEdDialog.react',['DOMContainer.react','LayerHideOnBlur','React','XUIContextualDialog.react','XUIContextualDialogBody.react'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'PrivacyEdDialog',propTypes:{context:h.object,dialogContent:h.object},render:function(){return (c('React').createElement(c('XUIContextualDialog.react'),{context:this.props.context,shown:true,position:'below',alignment:'center',width:300,behaviors:{LayerHideOnBlur:c('LayerHideOnBlur')}},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement(c('DOMContainer.react'),null,this.props.dialogContent))));}});f.exports=i;},null);
__d('MetaComposerEdDialog',['Arbiter','AsyncRequest','DOM','React','ReactRenderer','PrivacyEdDialog.react','Vector'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null;function i(j){this._dialog=null;this.config=j;this._text_container=j.text_container;this._container=j.dialog_container;this._init();}i.init=function(j){if(h){h.config.show_audience=j.show_audience;return;}h=new i(j);};Object.assign(i.prototype,{_init:function(){c('Arbiter').subscribe(['ComposerXStatusAttachment/ready','ReactComposerStatusLazyAttachment/mounted','ReactComposerStatusEagerAttachment/mounted','composer/ready'],function(){if(this.config.show_audience){this._sendEducationRequest({},'/ajax/composer/audience/education',this._handlerCustomDuration.bind(this,6000));this.config.show_audience=false;}}.bind(this));if(this.config.show_sticky)c('Arbiter').subscribe(['composer/mutate','ComposerXBootloadStatusAttachment/mutate','ReactComposerStatusEagerAttachment/mounted'],function(j,k){this._sendEducationRequest({sticky_num:this.config.n_sticky_shown},'/ajax/composer/audience/sticky_education',this._handler.bind(this));}.bind(this));if(this.config.show_tags)c('Arbiter').subscribe(['SelectedPrivacyOption/changed','PrivacySelectorBase/changed'],function(j,k){this._sendEducationRequest({ids:k.tags,from:'WithTagger',hasEvent:k.hasEvent,type:k.privacy,tag_num:this.config.n_tag_shown},'/ajax/composer/audience/tag_education',this._handler.bind(this));}.bind(this));},_sendEducationRequest:function(j,k,l){if(!this._getContext())return;this._async&&this._async.abort();this._async=new (c('AsyncRequest'))(k);this._async.setData(j).setHandler(l).send();},_getContext:function(){var j=c('DOM').scry(document.body,'div.composerAudienceWrapper'),k,l;for(var m=0;m<j.length;m++){k=j[m];l=c('Vector').getElementPosition(k);if(k&&l.x>0&&l.y>0)return k;}return null;},_handler:function(j){this._handlerCustomDuration(1500,j);},_handlerCustomDuration:function(j,k){var l=k.payload,m=this._getContext();if(!l||!m)return;this._dialog=c('ReactRenderer').constructAndRenderComponent(c('PrivacyEdDialog.react'),{context:m,dialogContent:this._text_container},this._container);c('DOM').setContent(this._text_container,l);}});f.exports=i;},null);